{"remainingRequest":"D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js!D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\src\\store\\module\\user.js","dependencies":[{"path":"D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\src\\store\\module\\user.js","mtime":1605791078181},{"path":"D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605791053029},{"path":"D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":1605791047245},{"path":"D:\\Program Files\\Microsoft VS Code\\Myproject\\GSL-IOT\\web\\node_modules\\eslint-loader\\index.js","mtime":1605791057309}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovUHJvZ3JhbSBGaWxlcy9NaWNyb3NvZnQgVlMgQ29kZS9NeXByb2plY3QvR1NMLUlPVC93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9Qcm9ncmFtIEZpbGVzL01pY3Jvc29mdCBWUyBDb2RlL015cHJvamVjdC9HU0wtSU9UL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IGxvZ2luIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGpzb25JbkJsYWNrbGlzdCB9IGZyb20gJ0AvYXBpL2p3dCc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvaW5kZXgnOwpleHBvcnQgdmFyIHVzZXIgPSB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgdXNlckluZm86IHsKICAgICAgdXVpZDogIiIsCiAgICAgIG5pY2tOYW1lOiAiIiwKICAgICAgaGVhZGVySW1nOiAiIiwKICAgICAgYXV0aG9yaXR5OiAiIgogICAgfSwKICAgIHRva2VuOiAiIiwKICAgIExTdG9rZW46ICIiIC8vTG9yYVNlcnZlciB0b2tlbgoKICB9LAogIG11dGF0aW9uczogewogICAgc2V0VXNlckluZm86IGZ1bmN0aW9uIHNldFVzZXJJbmZvKHN0YXRlLCB1c2VySW5mbykgewogICAgICAvLyDov5nph4znmoQgYHN0YXRlYCDlr7nosaHmmK/mqKHlnZfnmoTlsYDpg6jnirbmgIEKICAgICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKICAgIH0sCiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICAgIC8vIOi/memHjOeahCBgc3RhdGVgIOWvueixoeaYr+aooeWdl+eahOWxgOmDqOeKtuaAgQogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgfSwKICAgIFNldExTdG9rZW46IGZ1bmN0aW9uIFNldExTdG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLkxTdG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBMb2dpbk91dDogZnVuY3Rpb24gTG9naW5PdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudXNlckluZm8gPSB7fTsKICAgICAgc3RhdGUudG9rZW4gPSAiIjsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdsb2dpbicsCiAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICB9KTsKICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKICAgIFJlc2V0VXNlckluZm86IGZ1bmN0aW9uIFJlc2V0VXNlckluZm8oc3RhdGUpIHsKICAgICAgdmFyIHVzZXJJbmZvID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTsKICAgICAgc3RhdGUudXNlckluZm8gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlLnVzZXJJbmZvKSwgdXNlckluZm8pOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgTG9naW5JbjogZnVuY3Rpb24gTG9naW5JbihfcmVmLCBsb2dpbkluZm8pIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgY29tbWl0LCByZXMsIHJlZGlyZWN0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gbG9naW4obG9naW5JbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ3NldFVzZXJJbmZvJywgcmVzLmRhdGEudXNlcik7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ID0gcm91dGVyLmhpc3RvcnkuY3VycmVudC5xdWVyeS5yZWRpcmVjdDsKCiAgICAgICAgICAgICAgICAgIGlmIChyZWRpcmVjdCkgewogICAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHJlZGlyZWN0CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcGF0aDogJy9sYXlvdXQvZGFzaGJvYXJkJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBMb2dpbk91dDogZnVuY3Rpb24gTG9naW5PdXQoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4ganNvbkluQmxhY2tsaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgiTG9naW5PdXQiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICB1c2VySW5mbzogZnVuY3Rpb24gdXNlckluZm8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXJJbmZvOwogICAgfSwKICAgIHRva2VuOiBmdW5jdGlvbiB0b2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudG9rZW47CiAgICB9LAogICAgTFN0b2tlbjogZnVuY3Rpb24gTFN0b2tlbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuTFN0b2tlbjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:/Program Files/Microsoft VS Code/Myproject/GSL-IOT/web/src/store/module/user.js"],"names":["login","jsonInBlacklist","router","user","namespaced","state","userInfo","uuid","nickName","headerImg","authority","token","LStoken","mutations","setUserInfo","setToken","SetLStoken","LoginOut","push","name","replace","sessionStorage","clear","window","location","reload","ResetUserInfo","actions","LoginIn","loginInfo","commit","res","code","data","redirect","history","current","query","path","getters"],"mappings":"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","sourcesContent":["import { login } from '@/api/user'\r\nimport { jsonInBlacklist } from '@/api/jwt'\r\nimport router from '@/router/index'\r\nexport const user = {\r\n    namespaced: true,\r\n    state: {\r\n        userInfo: {\r\n            uuid: \"\",\r\n            nickName: \"\",\r\n            headerImg: \"\",\r\n            authority: \"\",\r\n        },\r\n        token: \"\",\r\n        LStoken: \"\",  //LoraServer token\r\n    },\r\n    mutations: {\r\n        setUserInfo(state, userInfo) {\r\n            // 这里的 `state` 对象是模块的局部状态\r\n            state.userInfo = userInfo\r\n        },\r\n        setToken(state, token) {\r\n            // 这里的 `state` 对象是模块的局部状态\r\n            state.token = token\r\n        },\r\n        SetLStoken(state,token){\r\n            state.LStoken=token\r\n        },\r\n        LoginOut(state) {\r\n            state.userInfo = {}\r\n            state.token = \"\"\r\n            router.push({ name: 'login', replace: true })\r\n            sessionStorage.clear()\r\n            window.location.reload()\r\n        },\r\n        ResetUserInfo(state, userInfo = {}) {\r\n            state.userInfo = {...state.userInfo,\r\n                ...userInfo\r\n            }\r\n        }\r\n    },\r\n    actions: {\r\n        async LoginIn({ commit }, loginInfo) {\r\n            const res = await login(loginInfo)\r\n            if (res.code == 0) {\r\n                commit('setUserInfo', res.data.user)\r\n                commit('setToken', res.data.token)\r\n                const redirect = router.history.current.query.redirect\r\n                if (redirect) {\r\n                    router.push({ path: redirect })\r\n                } else {\r\n                    router.push({ path: '/layout/dashboard' })\r\n                }\r\n            }\r\n        },\r\n        async LoginOut({ commit }) {\r\n            const res = await jsonInBlacklist()\r\n            if (res.code == 0) {\r\n                commit(\"LoginOut\")\r\n            }\r\n        }\r\n    },\r\n    getters: {\r\n        userInfo(state) {\r\n            return state.userInfo\r\n        },\r\n        token(state) {\r\n            return state.token\r\n        },\r\n        LStoken(state){\r\n            return state.LStoken\r\n        }\r\n\r\n    }\r\n}"]}]}