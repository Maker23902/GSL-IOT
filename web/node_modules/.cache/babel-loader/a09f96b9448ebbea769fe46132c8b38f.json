{"remainingRequest":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js!D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Programs\\Project\\GSL-IOT\\web\\src\\store\\module\\router.js","dependencies":[{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\src\\store\\module\\router.js","mtime":1605233962967},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1605233951981},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":1605233951045},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\eslint-loader\\index.js","mtime":1605233954733}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovUHJvZ3JhbXMvUHJvamVjdC9HU0wtSU9UL3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGFzeW5jUm91dGVySGFuZGxlIH0gZnJvbSAnQC91dGlscy9hc3luY1JvdXRlcic7CmltcG9ydCB7IGFzeW5jTWVudSB9IGZyb20gJ0AvYXBpL21lbnUnOwp2YXIgcm91dGVyTGlzdCA9IFtdOwoKdmFyIGZvcm1hdFJvdXRlciA9IGZ1bmN0aW9uIGZvcm1hdFJvdXRlcihyb3V0ZXMpIHsKICByb3V0ZXMgJiYgcm91dGVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKCghaXRlbS5jaGlsZHJlbiB8fCBpdGVtLmNoaWxkcmVuLmV2ZXJ5KGZ1bmN0aW9uIChjaCkgewogICAgICByZXR1cm4gY2guaGlkZGVuOwogICAgfSkpICYmIGl0ZW0ubmFtZSAhPSAnNDA0JykgewogICAgICByb3V0ZXJMaXN0LnB1c2goewogICAgICAgIGxhYmVsOiBpdGVtLm1ldGEudGl0bGUsCiAgICAgICAgdmFsdWU6IGl0ZW0ubmFtZQogICAgICB9KTsKICAgIH0KCiAgICBpdGVtLm1ldGEuaGlkZGVuID0gaXRlbS5oaWRkZW47CgogICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgIGZvcm1hdFJvdXRlcihpdGVtLmNoaWxkcmVuKTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydCB2YXIgcm91dGVyID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGFzeW5jUm91dGVyczogW10sCiAgICByb3V0ZXJMaXN0OiByb3V0ZXJMaXN0CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFJvdXRlckxpc3Q6IGZ1bmN0aW9uIHNldFJvdXRlckxpc3Qoc3RhdGUsIHJvdXRlckxpc3QpIHsKICAgICAgc3RhdGUucm91dGVyTGlzdCA9IHJvdXRlckxpc3Q7CiAgICB9LAogICAgLy8g6K6+572u5Yqo5oCB6Lev55SxCiAgICBzZXRBc3luY1JvdXRlcjogZnVuY3Rpb24gc2V0QXN5bmNSb3V0ZXIoc3RhdGUsIGFzeW5jUm91dGVycykgewogICAgICBzdGF0ZS5hc3luY1JvdXRlcnMgPSBhc3luY1JvdXRlcnM7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDku47lkI7lj7Dojrflj5bliqjmgIHot6/nlLEKICAgIFNldEFzeW5jUm91dGVyOiBmdW5jdGlvbiBTZXRBc3luY1JvdXRlcihfcmVmKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbW1pdCwgYmFzZVJvdXRlciwgYXN5bmNSb3V0ZXJSZXMsIGFzeW5jUm91dGVyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgYmFzZVJvdXRlciA9IFt7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICcvbGF5b3V0JywKICAgICAgICAgICAgICAgICAgbmFtZTogJ2xheW91dCcsCiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogInZpZXcvbGF5b3V0L2luZGV4LnZ1ZSIsCiAgICAgICAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIuW6leWxgmxheW91dCIKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jTWVudSgpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBhc3luY1JvdXRlclJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBhc3luY1JvdXRlciA9IGFzeW5jUm91dGVyUmVzLmRhdGEubWVudXM7CiAgICAgICAgICAgICAgICBhc3luY1JvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcGF0aDogIjQwNCIsCiAgICAgICAgICAgICAgICAgIG5hbWU6ICI0MDQiLAogICAgICAgICAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgICAgICAgICAgIG1ldGE6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIui/t+i3r+S6hirjgIIqIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd2aWV3L2Vycm9yL2luZGV4LnZ1ZScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZm9ybWF0Um91dGVyKGFzeW5jUm91dGVyKTsKICAgICAgICAgICAgICAgIGJhc2VSb3V0ZXJbMF0uY2hpbGRyZW4gPSBhc3luY1JvdXRlcjsKICAgICAgICAgICAgICAgIGJhc2VSb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgIHBhdGg6ICcqJywKICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICcvbGF5b3V0LzQwNCcKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgYXN5bmNSb3V0ZXJIYW5kbGUoYmFzZVJvdXRlcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEFzeW5jUm91dGVyJywgYmFzZVJvdXRlcik7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldFJvdXRlckxpc3QnLCByb3V0ZXJMaXN0KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgLy8g6I635Y+W5Yqo5oCB6Lev55SxCiAgICBhc3luY1JvdXRlcnM6IGZ1bmN0aW9uIGFzeW5jUm91dGVycyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYXN5bmNSb3V0ZXJzOwogICAgfSwKICAgIHJvdXRlckxpc3Q6IGZ1bmN0aW9uIHJvdXRlckxpc3Qoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnJvdXRlckxpc3Q7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:/Programs/Project/GSL-IOT/web/src/store/module/router.js"],"names":["asyncRouterHandle","asyncMenu","routerList","formatRouter","routes","map","item","children","every","ch","hidden","name","push","label","meta","title","value","length","router","namespaced","state","asyncRouters","mutations","setRouterList","setAsyncRouter","actions","SetAsyncRouter","commit","baseRouter","path","component","asyncRouterRes","asyncRouter","data","menus","redirect","getters"],"mappings":"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","sourcesContent":["import { asyncRouterHandle } from '@/utils/asyncRouter';\r\n\r\nimport { asyncMenu } from '@/api/menu'\r\n\r\nconst routerList = []\r\nconst formatRouter = (routes) => {\r\n    routes && routes.map(item => {\r\n        if ((!item.children || item.children.every(ch => ch.hidden)) && item.name != '404') {\r\n            routerList.push({ label: item.meta.title, value: item.name })\r\n        }\r\n        item.meta.hidden = item.hidden\r\n        if (item.children && item.children.length > 0) {\r\n            formatRouter(item.children)\r\n        }\r\n    })\r\n}\r\n\r\nexport const router = {\r\n    namespaced: true,\r\n    state: {\r\n        asyncRouters: [],\r\n        routerList: routerList,\r\n    },\r\n    mutations: {\r\n        setRouterList(state, routerList) {\r\n            state.routerList = routerList\r\n        },\r\n        // 设置动态路由\r\n        setAsyncRouter(state, asyncRouters) {\r\n            state.asyncRouters = asyncRouters\r\n        }\r\n    },\r\n    actions: {\r\n        // 从后台获取动态路由\r\n        async SetAsyncRouter({ commit }) {\r\n            const baseRouter = [{\r\n                path: '/layout',\r\n                name: 'layout',\r\n                component: \"view/layout/index.vue\",\r\n                meta: {\r\n                    title: \"底层layout\"\r\n                },\r\n                children: []\r\n            }]\r\n            const asyncRouterRes = await asyncMenu()\r\n            const asyncRouter = asyncRouterRes.data.menus\r\n            asyncRouter.push({\r\n                path: \"404\",\r\n                name: \"404\",\r\n                hidden: true,\r\n                meta: {\r\n                    title: \"迷路了*。*\",\r\n                },\r\n                component: 'view/error/index.vue'\r\n            })\r\n            formatRouter(asyncRouter)\r\n            baseRouter[0].children = asyncRouter\r\n            baseRouter.push({\r\n                path: '*',\r\n                redirect: '/layout/404'\r\n\r\n            })\r\n            asyncRouterHandle(baseRouter)\r\n            commit('setAsyncRouter', baseRouter)\r\n            commit('setRouterList', routerList)\r\n            return true\r\n        }\r\n    },\r\n    getters: {\r\n        // 获取动态路由\r\n        asyncRouters(state) {\r\n            return state.asyncRouters\r\n        },\r\n        routerList(state) {\r\n            return state.routerList\r\n        }\r\n    }\r\n}"]}]}