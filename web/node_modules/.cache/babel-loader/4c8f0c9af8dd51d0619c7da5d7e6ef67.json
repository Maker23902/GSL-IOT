{"remainingRequest":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\babel-loader\\lib\\index.js!D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Programs\\Project\\gin-vue-admin-master\\web\\src\\view\\superAdmin\\authority\\components\\menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\src\\view\\superAdmin\\authority\\components\\menus.vue","mtime":1600866450000},{"path":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\gin-vue-admin-master\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1Byb2dyYW1zL1Byb2plY3QvZ2luLXZ1ZS1hZG1pbi1tYXN0ZXIvd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QmFzZU1lbnVUcmVlLCBnZXRNZW51QXV0aG9yaXR5LCBhZGRNZW51QXV0aG9yaXR5IH0gZnJvbSAnQC9hcGkvbWVudSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWVudXMnLAogIHByb3BzOiB7CiAgICByb3c6IHsKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51VHJlZURhdGE6IFtdLAogICAgICBtZW51VHJlZUlkczogW10sCiAgICAgIG5lZWRDb25maXJtOiBmYWxzZSwKICAgICAgbWVudURlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiBmdW5jdGlvbiBsYWJlbChkYXRhKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5tZXRhLnRpdGxlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG5vZGVDaGFuZ2U6IGZ1bmN0aW9uIG5vZGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMubmVlZENvbmZpcm0gPSB0cnVlOwogICAgfSwKICAgIC8vIOaatOmcsue7meWkluWxguS9v+eUqOeahOWIh+aNouaLpuaIque7n+S4gOaWueazlQogICAgZW50ZXJBbmROZXh0OiBmdW5jdGlvbiBlbnRlckFuZE5leHQoKSB7CiAgICAgIHRoaXMucmVsYXRpb24oKTsKICAgIH0sCiAgICAvLyDlhbPogZTmoJEg56Gu6K6k5pa55rOVCiAgICByZWxhdGlvbjogZnVuY3Rpb24gcmVsYXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjaGVja0FyciwgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNoZWNrQXJyID0gX3RoaXMuJHJlZnMubWVudVRyZWUuZ2V0Q2hlY2tlZE5vZGVzKGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGFkZE1lbnVBdXRob3JpdHkoewogICAgICAgICAgICAgICAgICBtZW51czogY2hlY2tBcnIsCiAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUlkOiBfdGhpcy5yb3cuYXV0aG9yaXR5SWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+iPnOWNleiuvue9ruaIkOWKnyEnCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciByZXMsIHJlczEsIG1lbnVzLCBhcnI7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBnZXRCYXNlTWVudVRyZWUoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBfdGhpczIubWVudVRyZWVEYXRhID0gcmVzLmRhdGEubWVudXM7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBnZXRNZW51QXV0aG9yaXR5KHsKICAgICAgICAgICAgICAgIGF1dGhvcml0eUlkOiBfdGhpczIucm93LmF1dGhvcml0eUlkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmVzMSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIG1lbnVzID0gcmVzMS5kYXRhLm1lbnVzOwogICAgICAgICAgICAgIGFyciA9IFtdOwogICAgICAgICAgICAgIG1lbnVzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgLy8g6Ziy5q2i55u05o6l6YCJ5Lit54i257qn6YCg5oiQ5YWo6YCJCiAgICAgICAgICAgICAgICBpZiAoIW1lbnVzLnNvbWUoZnVuY3Rpb24gKHNhbWUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHNhbWUucGFyZW50SWQgPT09IGl0ZW0ubWVudUlkOwogICAgICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICAgICAgYXJyLnB1c2goTnVtYmVyKGl0ZW0ubWVudUlkKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMyLm1lbnVUcmVlSWRzID0gYXJyOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["menus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAmBA,SAAA,eAAA,EAAA,gBAAA,EAAA,gBAAA,QAAA,YAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA,EAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA;AADA,GAFA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAGA,MAAA,WAAA,EAAA,KAHA;AAIA,MAAA,gBAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA,eAAA,IAAA,EAAA;AACA,iBAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA;AAJA;AAJA,KAAA;AAWA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAHA;AAIA;AACA,IAAA,YALA,0BAKA;AACA,WAAA,QAAA;AACA,KAPA;AAQA;AACA,IAAA,QATA,sBASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,QADA,GACA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,eAAA,CAAA,KAAA,EAAA,IAAA,CADA;AAAA;AAAA,uBAEA,gBAAA,CAAA;AACA,kBAAA,KAAA,EAAA,QADA;AAEA,kBAAA,WAAA,EAAA,KAAA,CAAA,GAAA,CAAA;AAFA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,GAFA;;AAMA,oBAAA,GAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA;AACA,oBAAA,IAAA,EAAA,SADA;AAEA,oBAAA,OAAA,EAAA;AAFA,mBAAA;AAIA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AArBA,GAvBA;AA8CA,EAAA,OA9CA,qBA8CA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEA,eAAA,EAFA;;AAAA;AAEA,cAAA,GAFA;AAGA,cAAA,MAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AAHA;AAAA,qBAKA,gBAAA,CAAA;AAAA,gBAAA,WAAA,EAAA,MAAA,CAAA,GAAA,CAAA;AAAA,eAAA,CALA;;AAAA;AAKA,cAAA,IALA;AAMA,cAAA,KANA,GAMA,IAAA,CAAA,IAAA,CAAA,KANA;AAOA,cAAA,GAPA,GAOA,EAPA;AAQA,cAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA;AACA,oBAAA,CAAA,KAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,yBAAA,IAAA,CAAA,QAAA,KAAA,IAAA,CAAA,MAAA;AAAA,iBAAA,CAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,MAAA,CAAA;AACA;AACA,eALA;AAMA,cAAA,MAAA,CAAA,WAAA,GAAA,GAAA;;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AA7DA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"clearflex\">\n      <el-button @click=\"relation\" class=\"fl-right\" size=\"small\" type=\"primary\">确 定</el-button>\n    </div>\n    <el-tree\n      :data=\"menuTreeData\"\n      :default-checked-keys=\"menuTreeIds\"\n      :props=\"menuDefaultProps\"\n      @check=\"nodeChange\"\n      default-expand-all\n      highlight-current\n      node-key=\"ID\"\n      ref=\"menuTree\"\n      show-checkbox\n    ></el-tree>\n  </div>\n</template>\n<script>\nimport { getBaseMenuTree, getMenuAuthority, addMenuAuthority } from '@/api/menu'\n\nexport default {\n  name: 'Menus',\n  props: {\n    row: {\n      default: function() {\n        return {}\n      },\n      type: Object\n    }\n  },\n  data() {\n    return {\n      menuTreeData: [],\n      menuTreeIds: [],\n      needConfirm:false,\n      menuDefaultProps: {\n        children: 'children',\n        label: function(data){\n          return data.meta.title\n        }\n      }\n    }\n  },\n  methods: {\n    nodeChange(){\n      this.needConfirm = true\n    },\n    // 暴露给外层使用的切换拦截统一方法\n    enterAndNext(){\n      this.relation()\n    },\n    // 关联树 确认方法\n    async relation() {\n      const checkArr = this.$refs.menuTree.getCheckedNodes(false, true)\n      const res = await addMenuAuthority({\n        menus: checkArr,\n        authorityId: this.row.authorityId\n      })\n      if (res.code == 0) {\n        this.$message({\n          type: 'success',\n          message: '菜单设置成功!'\n        })\n      }\n    }\n  },\n  async created() {\n    // 获取所有菜单树\n    const res = await getBaseMenuTree()\n    this.menuTreeData = res.data.menus\n\n    const res1 = await getMenuAuthority({ authorityId: this.row.authorityId })\n    const menus = res1.data.menus\n    const arr = []\n    menus.map(item => {\n      // 防止直接选中父级造成全选\n      if (!menus.some(same => same.parentId === item.menuId)) {\n        arr.push(Number(item.menuId))\n      }\n    })\n    this.menuTreeIds = arr\n  }\n}\n</script>\n<style lang=\"scss\">\n</style>"],"sourceRoot":"src/view/superAdmin/authority/components"}]}