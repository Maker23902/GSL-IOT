{"remainingRequest":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Programs\\Project\\GSL-IOT\\web\\src\\view\\superAdmin\\authority\\authority.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\src\\view\\superAdmin\\authority\\authority.vue","mtime":1600866450000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOiOt+WPluWIl+ihqOWGheWuueWwgeijheWcqG1peGluc+WGhemDqCAgZ2V0VGFibGVEYXRh5pa55rOVIOWIneWni+WMluW3suWwgeijheWujOaIkAoKaW1wb3J0IHsKICBnZXRBdXRob3JpdHlMaXN0LAogIGRlbGV0ZUF1dGhvcml0eSwKICBjcmVhdGVBdXRob3JpdHksCiAgdXBkYXRlQXV0aG9yaXR5LAogIGNvcHlBdXRob3JpdHkKfSBmcm9tICJAL2FwaS9hdXRob3JpdHkiOwoKaW1wb3J0IE1lbnVzIGZyb20gIkAvdmlldy9zdXBlckFkbWluL2F1dGhvcml0eS9jb21wb25lbnRzL21lbnVzIjsKaW1wb3J0IEFwaXMgZnJvbSAiQC92aWV3L3N1cGVyQWRtaW4vYXV0aG9yaXR5L2NvbXBvbmVudHMvYXBpcyI7CmltcG9ydCBEYXRhcyBmcm9tICJAL3ZpZXcvc3VwZXJBZG1pbi9hdXRob3JpdHkvY29tcG9uZW50cy9kYXRhcyI7CgppbXBvcnQgaW5mb0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL21peGlucy9pbmZvTGlzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQXV0aG9yaXR5IiwKICBtaXhpbnM6IFtpbmZvTGlzdF0sCiAgZGF0YSgpIHsKICAgIHZhciBtdXN0VWludCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCEoL15bMC05XSpbMS05XVswLTldKiQvKS50ZXN0KHZhbHVlKSl7CiAgICAgICByZXR1cm4gIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j5pW05pWwIikpOwogICAgICB9IAogICAgICByZXR1cm4gIGNhbGxiYWNrKCkKICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgQXV0aG9yaXR5T3B0aW9uOiBbCiAgICAgICAgewogICAgICAgICAgYXV0aG9yaXR5SWQ6ICIwIiwKICAgICAgICAgIGF1dGhvcml0eU5hbWU6ICLmoLnop5LoibIiCiAgICAgICAgfQogICAgICBdLAogICAgICBsaXN0QXBpOiBnZXRBdXRob3JpdHlMaXN0LAogICAgICBkcmF3ZXI6IGZhbHNlLAogICAgICBkaWFsb2dUeXBlOiAiYWRkIiwKICAgICAgYWN0aXZlUm93OiB7fSwKICAgICAgYWN0aXZlVXNlcklkOiAwLAogICAgICBkaWFsb2dUaXRsZTogIuaWsOWinuinkuiJsiIsCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgYXBpRGlhbG9nRmxhZzogZmFsc2UsCiAgICAgIGNvcHlGb3JtOiB7fSwKICAgICAgZm9ybTogewogICAgICAgIGF1dGhvcml0eUlkOiAiIiwKICAgICAgICBhdXRob3JpdHlOYW1lOiAiIiwKICAgICAgICBwYXJlbnRJZDogIjAiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgYXV0aG9yaXR5SWQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXop5LoibJJRCIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAge3ZhbGlkYXRvcjogbXVzdFVpbnQsIHRyaWdnZXI6ICdibHVyJyAgfQogICAgICAgIF0sCiAgICAgICAgYXV0aG9yaXR5TmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeinkuiJsuWQjSIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXSwKICAgICAgICBwYXJlbnRJZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqeivt+axguaWueW8jyIsIHRyaWdnZXI6ICJibHVyIiB9CiAgICAgICAgXQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgTWVudXMsCiAgICBBcGlzLAogICAgRGF0YXMKICB9LAogIG1ldGhvZHM6IHsKICAgIGF1dG9FbnRlcihhY3RpdmVOYW1lLCBvbGRBY3RpdmVOYW1lKSB7CiAgICAgIGNvbnN0IHBhbmVBcnIgPSBbIm1lbnVzIiwgImFwaXMiLCAiZGF0YXMiXTsKICAgICAgaWYgKG9sZEFjdGl2ZU5hbWUpIHsKICAgICAgICBpZiAodGhpcy4kcmVmc1twYW5lQXJyW29sZEFjdGl2ZU5hbWVdXS5uZWVkQ29uZmlybSkgewogICAgICAgICAgdGhpcy4kcmVmc1twYW5lQXJyW29sZEFjdGl2ZU5hbWVdXS5lbnRlckFuZE5leHQoKTsKICAgICAgICAgIHRoaXMuJHJlZnNbcGFuZUFycltvbGRBY3RpdmVOYW1lXV0ubmVlZENvbmZpcm0gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmi7fotJ3op5LoibIKICAgIGNvcHlBdXRob3JpdHkocm93KSB7CiAgICAgIHRoaXMuc2V0T3B0aW9ucygpOwogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gIuaLt+i0neinkuiJsiI7CiAgICAgIHRoaXMuZGlhbG9nVHlwZSA9ICJjb3B5IjsKICAgICAgZm9yIChsZXQgayBpbiB0aGlzLmZvcm0pIHsKICAgICAgICB0aGlzLmZvcm1ba10gPSByb3dba107CiAgICAgIH0KICAgICAgdGhpcy5jb3B5Rm9ybSA9IHJvdzsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgb3BkZW5kcmF3ZXIocm93KSB7CiAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZTsKICAgICAgdGhpcy5hY3RpdmVSb3cgPSByb3c7CiAgICB9LAogICAgLy8g5Yig6Zmk6KeS6ImyCiAgICBkZWxldGVBdXRoKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xop5LoibIsIOaYr+WQpue7p+e7rT8iLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkKICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVBdXRob3JpdHkoeyBhdXRob3JpdHlJZDogcm93LmF1dGhvcml0eUlkIH0pOwogICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8hIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImluZm8iLAogICAgICAgICAgICBtZXNzYWdlOiAi5bey5Y+W5raI5Yig6ZmkIgogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW6KGo5Y2VCiAgICBpbml0Rm9ybSgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuYXV0aG9yaXR5Rm9ybSkgewogICAgICAgIHRoaXMuJHJlZnMuYXV0aG9yaXR5Rm9ybS5yZXNldEZpZWxkcygpOwogICAgICB9CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICBhdXRob3JpdHlJZDogIiIsCiAgICAgICAgYXV0aG9yaXR5TmFtZTogIiIsCiAgICAgICAgcGFyZW50SWQ6ICIwIgogICAgICB9OwogICAgfSwKICAgIC8vIOWFs+mXreeql+WPowogICAgY2xvc2VEaWFsb2coKSB7CiAgICAgIHRoaXMuaW5pdEZvcm0oKTsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmFwaURpYWxvZ0ZsYWcgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnoa7lrprlvLnnqpcKCiAgICBhc3luYyBlbnRlckRpYWxvZygpIHsKICAgICAgaWYgKHRoaXMuZm9ybS5hdXRob3JpdHlJZCA9PSAiMCIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBtZXNzYWdlOiAi6KeS6ImyaWTkuI3og73kuLowIgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLiRyZWZzLmF1dGhvcml0eUZvcm0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgc3dpdGNoICh0aGlzLmRpYWxvZ1R5cGUpIHsKICAgICAgICAgICAgY2FzZSAiYWRkIjoKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjcmVhdGVBdXRob3JpdHkodGhpcy5mb3JtKTsKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfISIKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgImVkaXQiOgogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHVwZGF0ZUF1dGhvcml0eSh0aGlzLmZvcm0pOwogICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8hIgogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAiY29weSI6IHsKICAgICAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB7CiAgICAgICAgICAgICAgICAgIGF1dGhvcml0eUlkOiAic3RyaW5nIiwKICAgICAgICAgICAgICAgICAgYXV0aG9yaXR5TmFtZTogInN0cmluZyIsCiAgICAgICAgICAgICAgICAgIGRhdGF1dGhvcml0eUlkOiBbXSwKICAgICAgICAgICAgICAgICAgcGFyZW50SWQ6ICJzdHJpbmciCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb2xkQXV0aG9yaXR5SWQ6IDAKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGRhdGEuYXV0aG9yaXR5LmF1dGhvcml0eUlkID0gdGhpcy5mb3JtLmF1dGhvcml0eUlkOwogICAgICAgICAgICAgIGRhdGEuYXV0aG9yaXR5LmF1dGhvcml0eU5hbWUgPSB0aGlzLmZvcm0uYXV0aG9yaXR5TmFtZTsKICAgICAgICAgICAgICBkYXRhLmF1dGhvcml0eS5wYXJlbnRJZCA9IHRoaXMuZm9ybS5wYXJlbnRJZDsKICAgICAgICAgICAgICBkYXRhLmF1dGhvcml0eS5kYXRhQXV0aG9yaXR5SWQgPSB0aGlzLmNvcHlGb3JtLmRhdGFBdXRob3JpdHlJZDsKICAgICAgICAgICAgICBkYXRhLm9sZEF1dGhvcml0eUlkID0gdGhpcy5jb3B5Rm9ybS5hdXRob3JpdHlJZDsKICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjb3B5QXV0aG9yaXR5KGRhdGEpOwogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAi5aSN5Yi25oiQ5Yqf77yBIgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW5pdEZvcm0oKTsKICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldE9wdGlvbnMoKSB7CiAgICAgIHRoaXMuQXV0aG9yaXR5T3B0aW9uID0gWwogICAgICAgIHsKICAgICAgICAgIGF1dGhvcml0eUlkOiAiMCIsCiAgICAgICAgICBhdXRob3JpdHlOYW1lOiAi5qC56KeS6ImyIgogICAgICAgIH0KICAgICAgXTsKICAgICAgdGhpcy5zZXRBdXRob3JpdHlPcHRpb25zKHRoaXMudGFibGVEYXRhLCB0aGlzLkF1dGhvcml0eU9wdGlvbiwgZmFsc2UpOwogICAgfSwKICAgIHNldEF1dGhvcml0eU9wdGlvbnMoQXV0aG9yaXR5RGF0YSwgb3B0aW9uc0RhdGEsIGRpc2FibGVkKSB7CiAgICAgIHRoaXMuZm9ybS5hdXRob3JpdHlJZCA9IFN0cmluZyh0aGlzLmZvcm0uYXV0aG9yaXR5SWQpOwogICAgICBBdXRob3JpdHlEYXRhICYmCiAgICAgICAgQXV0aG9yaXR5RGF0YS5tYXAoaXRlbSA9PiB7CiAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbiAmJiBpdGVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICBjb25zdCBvcHRpb24gPSB7CiAgICAgICAgICAgICAgYXV0aG9yaXR5SWQ6IGl0ZW0uYXV0aG9yaXR5SWQsCiAgICAgICAgICAgICAgYXV0aG9yaXR5TmFtZTogaXRlbS5hdXRob3JpdHlOYW1lLAogICAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBpdGVtLmF1dGhvcml0eUlkID09IHRoaXMuZm9ybS5hdXRob3JpdHlJZCwKICAgICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5zZXRBdXRob3JpdHlPcHRpb25zKAogICAgICAgICAgICAgIGl0ZW0uY2hpbGRyZW4sCiAgICAgICAgICAgICAgb3B0aW9uLmNoaWxkcmVuLAogICAgICAgICAgICAgIGRpc2FibGVkIHx8IGl0ZW0uYXV0aG9yaXR5SWQgPT0gdGhpcy5mb3JtLmF1dGhvcml0eUlkCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIG9wdGlvbnNEYXRhLnB1c2gob3B0aW9uKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHsKICAgICAgICAgICAgICBhdXRob3JpdHlJZDogaXRlbS5hdXRob3JpdHlJZCwKICAgICAgICAgICAgICBhdXRob3JpdHlOYW1lOiBpdGVtLmF1dGhvcml0eU5hbWUsCiAgICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkIHx8IGl0ZW0uYXV0aG9yaXR5SWQgPT0gdGhpcy5mb3JtLmF1dGhvcml0eUlkCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG9wdGlvbnNEYXRhLnB1c2gob3B0aW9uKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlop7liqDop5LoibIKICAgIGFkZEF1dGhvcml0eShwYXJlbnRJZCkgewogICAgICB0aGlzLmluaXRGb3JtKCk7CiAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAi5paw5aKe6KeS6ImyIjsKICAgICAgdGhpcy5kaWFsb2dUeXBlID0gImFkZCI7CiAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHBhcmVudElkOwogICAgICB0aGlzLnNldE9wdGlvbnMoKTsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g57yW6L6R6KeS6ImyCiAgICBlZGl0QXV0aG9yaXR5KHJvdykgewogICAgICB0aGlzLnNldE9wdGlvbnMoKTsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICLnvJbovpHop5LoibIiOwogICAgICB0aGlzLmRpYWxvZ1R5cGUgPSAiZWRpdCI7CiAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmZvcm0pIHsKICAgICAgICB0aGlzLmZvcm1ba2V5XSA9IHJvd1trZXldOwogICAgICB9CiAgICAgIHRoaXMuc2V0T3B0aW9ucygpOwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0KICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnBhZ2VTaXplID0gOTk5OwogICAgYXdhaXQgdGhpcy5nZXRUYWJsZURhdGEoKTsKICB9Cn07Cg=="},{"version":3,"sources":["authority.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"authority.vue","sourceRoot":"src/view/superAdmin/authority","sourcesContent":["<template>\n  <div class=\"authority\">\n    <div class=\"button-box clearflex\">\n      <el-button @click=\"addAuthority('0')\" type=\"primary\">新增角色</el-button>\n    </div>\n    <el-table\n      :data=\"tableData\"\n      :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\n      border\n      row-key=\"authorityId\"\n      stripe\n      style=\"width: 100%\"\n    >\n      <el-table-column label=\"角色id\" min-width=\"180\" prop=\"authorityId\"></el-table-column>\n      <el-table-column label=\"角色名称\" min-width=\"180\" prop=\"authorityName\"></el-table-column>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"460\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"opdendrawer(scope.row)\" size=\"small\" type=\"primary\">设置权限</el-button>\n          <el-button\n            @click=\"addAuthority(scope.row.authorityId)\"\n            icon=\"el-icon-plus\"\n            size=\"small\"\n            type=\"primary\"\n          >新增子角色</el-button>\n          <el-button\n            @click=\"copyAuthority(scope.row)\"\n            icon=\"el-icon-copy-document\"\n            size=\"small\"\n            type=\"primary\"\n          >拷贝</el-button>\n          <el-button\n            @click=\"editAuthority(scope.row)\"\n            icon=\"el-icon-edit\"\n            size=\"small\"\n            type=\"primary\"\n          >编辑</el-button>\n          <el-button\n            @click=\"deleteAuth(scope.row)\"\n            icon=\"el-icon-delete\"\n            size=\"small\"\n            type=\"danger\"\n          >删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 新增角色弹窗 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"authorityForm\">\n        <el-form-item label=\"父级角色\" prop=\"parentId\">\n          <el-cascader\n            :disabled=\"dialogType=='add'\"\n            :options=\"AuthorityOption\"\n            :props=\"{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false}\"\n            :show-all-levels=\"false\"\n            filterable\n            v-model=\"form.parentId\"\n          ></el-cascader>\n        </el-form-item>\n        <el-form-item label=\"角色ID\" prop=\"authorityId\">\n          <el-input :disabled=\"dialogType=='edit'\" autocomplete=\"off\" v-model=\"form.authorityId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"角色姓名\" prop=\"authorityName\">\n          <el-input autocomplete=\"off\" v-model=\"form.authorityName\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"closeDialog\">取 消</el-button>\n        <el-button @click=\"enterDialog\" type=\"primary\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-drawer :visible.sync=\"drawer\" :with-header=\"false\" size=\"40%\" title=\"角色配置\" v-if=\"drawer\">\n      <el-tabs :before-leave=\"autoEnter\" class=\"role-box\" type=\"border-card\">\n        <el-tab-pane label=\"角色菜单\">\n          <Menus :row=\"activeRow\" ref=\"menus\" />\n        </el-tab-pane>\n        <el-tab-pane label=\"角色api\">\n          <apis :row=\"activeRow\" ref=\"apis\" />\n        </el-tab-pane>\n        <el-tab-pane label=\"资源权限\">\n          <Datas :authority=\"tableData\" :row=\"activeRow\" ref=\"datas\" />\n        </el-tab-pane>\n      </el-tabs>\n    </el-drawer>\n  </div>\n</template>\n\n<script>\n// 获取列表内容封装在mixins内部  getTableData方法 初始化已封装完成\n\nimport {\n  getAuthorityList,\n  deleteAuthority,\n  createAuthority,\n  updateAuthority,\n  copyAuthority\n} from \"@/api/authority\";\n\nimport Menus from \"@/view/superAdmin/authority/components/menus\";\nimport Apis from \"@/view/superAdmin/authority/components/apis\";\nimport Datas from \"@/view/superAdmin/authority/components/datas\";\n\nimport infoList from \"@/components/mixins/infoList\";\nexport default {\n  name: \"Authority\",\n  mixins: [infoList],\n  data() {\n    var mustUint = (rule, value, callback) => {\n      if (!(/^[0-9]*[1-9][0-9]*$/).test(value)){\n       return  callback(new Error(\"请输入正整数\"));\n      } \n      return  callback()\n    };\n\n    return {\n      AuthorityOption: [\n        {\n          authorityId: \"0\",\n          authorityName: \"根角色\"\n        }\n      ],\n      listApi: getAuthorityList,\n      drawer: false,\n      dialogType: \"add\",\n      activeRow: {},\n      activeUserId: 0,\n      dialogTitle: \"新增角色\",\n      dialogFormVisible: false,\n      apiDialogFlag: false,\n      copyForm: {},\n      form: {\n        authorityId: \"\",\n        authorityName: \"\",\n        parentId: \"0\"\n      },\n      rules: {\n        authorityId: [\n          { required: true, message: \"请输入角色ID\", trigger: \"blur\" },\n          {validator: mustUint, trigger: 'blur'  }\n        ],\n        authorityName: [\n          { required: true, message: \"请输入角色名\", trigger: \"blur\" }\n        ],\n        parentId: [\n          { required: true, message: \"请选择请求方式\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  components: {\n    Menus,\n    Apis,\n    Datas\n  },\n  methods: {\n    autoEnter(activeName, oldActiveName) {\n      const paneArr = [\"menus\", \"apis\", \"datas\"];\n      if (oldActiveName) {\n        if (this.$refs[paneArr[oldActiveName]].needConfirm) {\n          this.$refs[paneArr[oldActiveName]].enterAndNext();\n          this.$refs[paneArr[oldActiveName]].needConfirm = false;\n        }\n      }\n    },\n    // 拷贝角色\n    copyAuthority(row) {\n      this.setOptions();\n      this.dialogTitle = \"拷贝角色\";\n      this.dialogType = \"copy\";\n      for (let k in this.form) {\n        this.form[k] = row[k];\n      }\n      this.copyForm = row;\n      this.dialogFormVisible = true;\n    },\n    opdendrawer(row) {\n      this.drawer = true;\n      this.activeRow = row;\n    },\n    // 删除角色\n    deleteAuth(row) {\n      this.$confirm(\"此操作将永久删除该角色, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          const res = await deleteAuthority({ authorityId: row.authorityId });\n          if (res.code == 0) {\n            this.$message({\n              type: \"success\",\n              message: \"删除成功!\"\n            });\n            this.getTableData();\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\"\n          });\n        });\n    },\n    // 初始化表单\n    initForm() {\n      if (this.$refs.authorityForm) {\n        this.$refs.authorityForm.resetFields();\n      }\n      this.form = {\n        authorityId: \"\",\n        authorityName: \"\",\n        parentId: \"0\"\n      };\n    },\n    // 关闭窗口\n    closeDialog() {\n      this.initForm();\n      this.dialogFormVisible = false;\n      this.apiDialogFlag = false;\n    },\n    // 确定弹窗\n\n    async enterDialog() {\n      if (this.form.authorityId == \"0\") {\n        this.$message({\n          type: \"error\",\n          message: \"角色id不能为0\"\n        });\n        return false;\n      }\n      this.$refs.authorityForm.validate(async valid => {\n        if (valid) {\n          switch (this.dialogType) {\n            case \"add\":\n              {\n                const res = await createAuthority(this.form);\n                if (res.code == 0) {\n                  this.$message({\n                    type: \"success\",\n                    message: \"添加成功!\"\n                  });\n                  this.getTableData();\n                  this.closeDialog();\n                }\n              }\n              break;\n            case \"edit\":\n              {\n                const res = await updateAuthority(this.form);\n                if (res.code == 0) {\n                  this.$message({\n                    type: \"success\",\n                    message: \"添加成功!\"\n                  });\n                  this.getTableData();\n                  this.closeDialog();\n                }\n              }\n              break;\n            case \"copy\": {\n              const data = {\n                authority: {\n                  authorityId: \"string\",\n                  authorityName: \"string\",\n                  datauthorityId: [],\n                  parentId: \"string\"\n                },\n                oldAuthorityId: 0\n              };\n              data.authority.authorityId = this.form.authorityId;\n              data.authority.authorityName = this.form.authorityName;\n              data.authority.parentId = this.form.parentId;\n              data.authority.dataAuthorityId = this.copyForm.dataAuthorityId;\n              data.oldAuthorityId = this.copyForm.authorityId;\n              const res = await copyAuthority(data);\n              if (res.code == 0) {\n                this.$message({\n                  type: \"success\",\n                  message: \"复制成功！\"\n                });\n                this.getTableData();\n              }\n            }\n          }\n\n          this.initForm();\n          this.dialogFormVisible = false;\n        }\n      });\n    },\n    setOptions() {\n      this.AuthorityOption = [\n        {\n          authorityId: \"0\",\n          authorityName: \"根角色\"\n        }\n      ];\n      this.setAuthorityOptions(this.tableData, this.AuthorityOption, false);\n    },\n    setAuthorityOptions(AuthorityData, optionsData, disabled) {\n      this.form.authorityId = String(this.form.authorityId);\n      AuthorityData &&\n        AuthorityData.map(item => {\n          if (item.children && item.children.length) {\n            const option = {\n              authorityId: item.authorityId,\n              authorityName: item.authorityName,\n              disabled: disabled || item.authorityId == this.form.authorityId,\n              children: []\n            };\n            this.setAuthorityOptions(\n              item.children,\n              option.children,\n              disabled || item.authorityId == this.form.authorityId\n            );\n            optionsData.push(option);\n          } else {\n            const option = {\n              authorityId: item.authorityId,\n              authorityName: item.authorityName,\n              disabled: disabled || item.authorityId == this.form.authorityId\n            };\n            optionsData.push(option);\n          }\n        });\n    },\n    // 增加角色\n    addAuthority(parentId) {\n      this.initForm();\n      this.dialogTitle = \"新增角色\";\n      this.dialogType = \"add\";\n      this.form.parentId = parentId;\n      this.setOptions();\n      this.dialogFormVisible = true;\n    },\n    // 编辑角色\n    editAuthority(row) {\n      this.setOptions();\n      this.dialogTitle = \"编辑角色\";\n      this.dialogType = \"edit\";\n      for (let key in this.form) {\n        this.form[key] = row[key];\n      }\n      this.setOptions();\n      this.dialogFormVisible = true;\n    }\n  },\n  async created() {\n    this.pageSize = 999;\n    await this.getTableData();\n  }\n};\n</script>\n<style lang=\"scss\">\n.authority {\n  .el-input-number {\n    margin-left: 15px;\n    span {\n      display: none;\n    }\n  }\n  .button-box {\n    padding: 10px 20px;\n    .el-button {\n      float: right;\n    }\n  }\n}\n.role-box {\n  .el-tabs__content {\n    height: calc(100vh - 150px);\n    overflow: auto;\n  }\n}\n</style>"]}]}