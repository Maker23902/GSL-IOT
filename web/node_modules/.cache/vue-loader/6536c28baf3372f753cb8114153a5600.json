{"remainingRequest":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Programs\\Project\\GSL-IOT\\web\\src\\view\\superAdmin\\api\\api.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\src\\view\\superAdmin\\api\\api.vue","mtime":1600866450000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\GSL-IOT\\web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIOiOt+WPluWIl+ihqOWGheWuueWwgeijheWcqG1peGluc+WGhemDqCAgZ2V0VGFibGVEYXRh5pa55rOVIOWIneWni+WMluW3suWwgeijheWujOaIkCDmnaHku7bmkJzntKLml7blgJkg6K+35oqK5p2h5Lu25a6J5aW95ZCO5Y+w5a6a5Yi255qE57uT5p6E5L2T5a2X5q61IOaUvuWIsCB0aGlzLnNlYXJjaEluZm8g5Lit5Y2z5Y+v5a6e546w5p2h5Lu25pCc57SiCgppbXBvcnQgewogIGdldEFwaUJ5SWQsCiAgZ2V0QXBpTGlzdCwKICBjcmVhdGVBcGksCiAgdXBkYXRlQXBpLAogIGRlbGV0ZUFwaQp9IGZyb20gJ0AvYXBpL2FwaScKaW1wb3J0IGluZm9MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9taXhpbnMvaW5mb0xpc3QnCmltcG9ydCB7IHRvU1FMTGluZSB9IGZyb20gJ0AvdXRpbHMvc3RyaW5nRnVuJwpjb25zdCBtZXRob2RPcHRpb25zID0gWwogIHsKICAgIHZhbHVlOiAnUE9TVCcsCiAgICBsYWJlbDogJ+WIm+W7uicsCiAgICB0eXBlOiAnc3VjY2VzcycKICB9LAogIHsKICAgIHZhbHVlOiAnR0VUJywKICAgIGxhYmVsOiAn5p+l55yLJywKICAgIHR5cGU6ICcnCiAgfSwKICB7CiAgICB2YWx1ZTogJ1BVVCcsCiAgICBsYWJlbDogJ+abtOaWsCcsCiAgICB0eXBlOiAnd2FybmluZycKICB9LAogIHsKICAgIHZhbHVlOiAnREVMRVRFJywKICAgIGxhYmVsOiAn5Yig6ZmkJywKICAgIHR5cGU6ICdkYW5nZXInCiAgfQpdCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwaScsCiAgbWl4aW5zOiBbaW5mb0xpc3RdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0QXBpOiBnZXRBcGlMaXN0LAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAn5paw5aKeQXBpJywKICAgICAgZm9ybTogewogICAgICAgIHBhdGg6ICcnLAogICAgICAgIGFwaUdyb3VwOiAnJywKICAgICAgICBtZXRob2Q6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJwogICAgICB9LAogICAgICBtZXRob2RPcHRpb25zOiBtZXRob2RPcHRpb25zLAogICAgICB0eXBlOiAnJywKICAgICAgcnVsZXM6IHsKICAgICAgICBwYXRoOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpWFwaei3r+W+hCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBhcGlHcm91cDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpee7hOWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBtZXRob2Q6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nor7fmsYLmlrnlvI8nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgZGVzY3JpcHRpb246IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaVhcGnku4vnu40nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5o6S5bqPCiAgICBzb3J0Q2hhbmdlKHsgcHJvcCwgb3JkZXIgfSkgewogICAgICBpZiAocHJvcCkgewogICAgICAgIHRoaXMuc2VhcmNoSW5mby5vcmRlcktleSA9IHRvU1FMTGluZShwcm9wKQogICAgICAgIHRoaXMuc2VhcmNoSW5mby5kZXNjID0gb3JkZXIgPT0gJ2Rlc2NlbmRpbmcnCiAgICAgIH0KICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgfSwKICAgIC8v5p2h5Lu25pCc57Si5YmN56uv55yL5q2k5pa55rOVCiAgICBvblN1Ym1pdCgpIHsKICAgICAgdGhpcy5wYWdlID0gMQogICAgICB0aGlzLnBhZ2VTaXplID0gMTAKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgfSwKICAgIGluaXRGb3JtKCkgewogICAgICB0aGlzLiRyZWZzLmFwaUZvcm0ucmVzZXRGaWVsZHMoKQogICAgICB0aGlzLmZvcm09IHsKICAgICAgICBwYXRoOiAnJywKICAgICAgICBhcGlHcm91cDogJycsCiAgICAgICAgbWV0aG9kOiAnJywKICAgICAgICBkZXNjcmlwdGlvbjogJycKICAgICAgfQogICAgfSwKICAgIGNsb3NlRGlhbG9nKCkgewogICAgICB0aGlzLmluaXRGb3JtKCkKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgb3BlbkRpYWxvZyh0eXBlKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ2FkZEFwaSc6CiAgICAgICAgICB0aGlzLmRpYWxvZ1RpdGxldGhpcyA9ICfmlrDlop5BcGknCiAgICAgICAgICBicmVhawogICAgICAgIGNhc2UgJ2VkaXQnOgogICAgICAgICAgdGhpcy5kaWFsb2dUaXRsZXRoaXMgPSAn57yW6L6RQXBpJwogICAgICAgICAgYnJlYWsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWsKICAgICAgfQogICAgICB0aGlzLnR5cGUgPSB0eXBlCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICB9LAogICAgYXN5bmMgZWRpdEFwaShyb3cpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2V0QXBpQnlJZCh7IGlkOiByb3cuSUQgfSkKICAgICAgdGhpcy5mb3JtID0gcmVzLmRhdGEuYXBpCiAgICAgIHRoaXMub3BlbkRpYWxvZygnZWRpdCcpCiAgICB9LAogICAgYXN5bmMgZGVsZXRlQXBpKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTmiYDmnInop5LoibLkuIvor6Xoj5zljZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkKICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVBcGkocm93KQogICAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLmdldFRhYmxlRGF0YSgpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICBhc3luYyBlbnRlckRpYWxvZygpIHsKICAgICAgdGhpcy4kcmVmcy5hcGlGb3JtLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ2FkZEFwaSc6CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgY3JlYXRlQXBpKHRoaXMuZm9ybSkKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5oiQ5YqfJywKICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgY2FzZSAnZWRpdCc6CiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdXBkYXRlQXBpKHRoaXMuZm9ybSkKICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn57yW6L6R5oiQ5YqfJywKICAgICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pyq55+l5pON5L2cJywKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhawogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIG1ldGhvZEZpbGV0cih2YWx1ZSkgewogICAgICBjb25zdCB0YXJnZXQgPSBtZXRob2RPcHRpb25zLmZpbHRlcihpdGVtID0+IGl0ZW0udmFsdWUgPT09IHZhbHVlKVswXQogICAgICAvLyByZXR1cm4gdGFyZ2V0ICYmIGAke3RhcmdldC5sYWJlbH0oJHt0YXJnZXQudmFsdWV9KWAKICAgICAgcmV0dXJuIHRhcmdldCAmJiBgJHt0YXJnZXQubGFiZWx9YAogICAgfSwKICAgIHRhZ1R5cGVGaWxldHIodmFsdWUpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gbWV0aG9kT3B0aW9ucy5maWx0ZXIoaXRlbSA9PiBpdGVtLnZhbHVlID09PSB2YWx1ZSlbMF0KICAgICAgcmV0dXJuIHRhcmdldCAmJiBgJHt0YXJnZXQudHlwZX1gCiAgICB9CiAgfSwKICBjcmVhdGVkKCl7CiAgICB0aGlzLmdldFRhYmxlRGF0YSgpCiAgfQp9Cg=="},{"version":3,"sources":["api.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"api.vue","sourceRoot":"src/view/superAdmin/api","sourcesContent":["<template>\n  <div>\n    <div class=\"search-term\">\n      <el-form :inline=\"true\" :model=\"searchInfo\" class=\"demo-form-inline\">\n        <el-form-item label=\"路径\">\n          <el-input placeholder=\"路径\" v-model=\"searchInfo.path\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input placeholder=\"描述\" v-model=\"searchInfo.description\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"api组\">\n          <el-input placeholder=\"api组\" v-model=\"searchInfo.apiGroup\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"请求\">\n          <el-select clearable placeholder=\"请选择\" v-model=\"searchInfo.method\">\n            <el-option\n              :key=\"item.value\"\n              :label=\"`${item.label}(${item.value})`\"\n              :value=\"item.value\"\n              v-for=\"item in methodOptions\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"onSubmit\" type=\"primary\">查询</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"openDialog('addApi')\" type=\"primary\">新增api</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <el-table :data=\"tableData\" @sort-change=\"sortChange\" border stripe>\n      <el-table-column label=\"id\" min-width=\"60\" prop=\"ID\" sortable=\"custom\"></el-table-column>\n      <el-table-column label=\"api路径\" min-width=\"150\" prop=\"path\" sortable=\"custom\"></el-table-column>\n      <el-table-column label=\"api分组\" min-width=\"150\" prop=\"apiGroup\" sortable=\"custom\"></el-table-column>\n      <el-table-column label=\"api简介\" min-width=\"150\" prop=\"description\" sortable=\"custom\"></el-table-column>\n      <el-table-column label=\"请求\" min-width=\"150\" prop=\"method\" sortable=\"custom\">\n        <template slot-scope=\"scope\">\n          <div>\n            {{scope.row.method}}\n            <el-tag\n              :key=\"scope.row.methodFiletr\"\n              :type=\"scope.row.method|tagTypeFiletr\"\n              effect=\"dark\"\n              size=\"mini\"\n            >{{scope.row.method|methodFiletr}}</el-tag>\n            <!-- {{scope.row.method|methodFiletr}} -->\n          </div>\n        </template>\n      </el-table-column>\n\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"editApi(scope.row)\" size=\"small\" type=\"primary\" icon=\"el-icon-edit\">编辑</el-button>\n          <el-button @click=\"deleteApi(scope.row)\" size=\"small\" type=\"danger\" icon=\"el-icon-delete\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      :current-page=\"page\"\n      :page-size=\"pageSize\"\n      :page-sizes=\"[10, 30, 50, 100]\"\n      :style=\"{float:'right',padding:'20px'}\"\n      :total=\"total\"\n      @current-change=\"handleCurrentChange\"\n      @size-change=\"handleSizeChange\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n    ></el-pagination>\n\n    <el-dialog :before-close=\"closeDialog\" :title=\"dialogTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-form :inline=\"true\" :model=\"form\" :rules=\"rules\" label-width=\"80px\" ref=\"apiForm\">\n        <el-form-item label=\"路径\" prop=\"path\">\n          <el-input autocomplete=\"off\" v-model=\"form.path\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"请求\" prop=\"method\">\n          <el-select placeholder=\"请选择\" v-model=\"form.method\">\n            <el-option\n              :key=\"item.value\"\n              :label=\"`${item.label}(${item.value})`\"\n              :value=\"item.value\"\n              v-for=\"item in methodOptions\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"api分组\" prop=\"apiGroup\">\n          <el-input autocomplete=\"off\" v-model=\"form.apiGroup\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"api简介\" prop=\"description\">\n          <el-input autocomplete=\"off\" v-model=\"form.description\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div class=\"warning\">新增Api需要在角色管理内配置权限才可使用</div>\n      <div class=\"dialog-footer\" slot=\"footer\">\n        <el-button @click=\"closeDialog\">取 消</el-button>\n        <el-button @click=\"enterDialog\" type=\"primary\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n\n<script>\n// 获取列表内容封装在mixins内部  getTableData方法 初始化已封装完成 条件搜索时候 请把条件安好后台定制的结构体字段 放到 this.searchInfo 中即可实现条件搜索\n\nimport {\n  getApiById,\n  getApiList,\n  createApi,\n  updateApi,\n  deleteApi\n} from '@/api/api'\nimport infoList from '@/components/mixins/infoList'\nimport { toSQLLine } from '@/utils/stringFun'\nconst methodOptions = [\n  {\n    value: 'POST',\n    label: '创建',\n    type: 'success'\n  },\n  {\n    value: 'GET',\n    label: '查看',\n    type: ''\n  },\n  {\n    value: 'PUT',\n    label: '更新',\n    type: 'warning'\n  },\n  {\n    value: 'DELETE',\n    label: '删除',\n    type: 'danger'\n  }\n]\n\nexport default {\n  name: 'Api',\n  mixins: [infoList],\n  data() {\n    return {\n      listApi: getApiList,\n      dialogFormVisible: false,\n      dialogTitle: '新增Api',\n      form: {\n        path: '',\n        apiGroup: '',\n        method: '',\n        description: ''\n      },\n      methodOptions: methodOptions,\n      type: '',\n      rules: {\n        path: [{ required: true, message: '请输入api路径', trigger: 'blur' }],\n        apiGroup: [\n          { required: true, message: '请输入组名称', trigger: 'blur' }\n        ],\n        method: [\n          { required: true, message: '请选择请求方式', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '请输入api介绍', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    // 排序\n    sortChange({ prop, order }) {\n      if (prop) {\n        this.searchInfo.orderKey = toSQLLine(prop)\n        this.searchInfo.desc = order == 'descending'\n      }\n      this.getTableData()\n    },\n    //条件搜索前端看此方法\n    onSubmit() {\n      this.page = 1\n      this.pageSize = 10\n      this.getTableData()\n    },\n    initForm() {\n      this.$refs.apiForm.resetFields()\n      this.form= {\n        path: '',\n        apiGroup: '',\n        method: '',\n        description: ''\n      }\n    },\n    closeDialog() {\n      this.initForm()\n      this.dialogFormVisible = false\n    },\n    openDialog(type) {\n      switch (type) {\n        case 'addApi':\n          this.dialogTitlethis = '新增Api'\n          break\n        case 'edit':\n          this.dialogTitlethis = '编辑Api'\n          break\n        default:\n          break\n      }\n      this.type = type\n      this.dialogFormVisible = true\n    },\n    async editApi(row) {\n      const res = await getApiById({ id: row.ID })\n      this.form = res.data.api\n      this.openDialog('edit')\n    },\n    async deleteApi(row) {\n      this.$confirm('此操作将永久删除所有角色下该菜单, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async () => {\n          const res = await deleteApi(row)\n          if (res.code == 0) {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            })\n            this.getTableData()\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n    },\n    async enterDialog() {\n      this.$refs.apiForm.validate(async valid => {\n        if (valid) {\n          switch (this.type) {\n            case 'addApi':\n              {\n                const res = await createApi(this.form)\n                if (res.code == 0) {\n                  this.$message({\n                    type: 'success',\n                    message: '添加成功',\n                    showClose: true\n                  })\n                }\n                this.getTableData()\n                this.closeDialog()\n              }\n\n              break\n            case 'edit':\n              {\n                const res = await updateApi(this.form)\n                if (res.code == 0) {\n                  this.$message({\n                    type: 'success',\n                    message: '编辑成功',\n                    showClose: true\n                  })\n                }\n                this.getTableData()\n                this.closeDialog()\n              }\n              break\n            default:\n              {\n                this.$message({\n                  type: 'error',\n                  message: '未知操作',\n                  showClose: true\n                })\n              }\n              break\n          }\n        }\n      })\n    }\n  },\n  filters: {\n    methodFiletr(value) {\n      const target = methodOptions.filter(item => item.value === value)[0]\n      // return target && `${target.label}(${target.value})`\n      return target && `${target.label}`\n    },\n    tagTypeFiletr(value) {\n      const target = methodOptions.filter(item => item.value === value)[0]\n      return target && `${target.type}`\n    }\n  },\n  created(){\n    this.getTableData()\n  }\n}\n</script>\n<style scoped lang=\"scss\">\n.button-box {\n  padding: 10px 20px;\n  .el-button {\n    float: right;\n  }\n}\n.el-tag--mini {\n  margin-left: 5px;\n}\n.warning {\n  color: #dc143c;\n}\n</style>"]}]}